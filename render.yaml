# render.yaml - Render Blueprint Configuration
# This file tells Render how to deploy your application
# Place this in your repository root

services:
  - type: web
    name: faida-app
    env: docker
    region: frankfurt  # or your preferred region
    plan: free  # or starter, standard, etc.
    
    # Docker configuration
    dockerfilePath: ./src/Dockerfile
    dockerContext: ./src
    
    # Health check
    healthCheckPath: /health
    
    # Environment variables (set these in Render Dashboard)
    envVars:
      - key: FLASK_ENV
        value: production
      - key: DATABASE_URL
        sync: false  # Set manually in dashboard (Neon Production URL)
      - key: SECRET_KEY
        generateValue: true  # Render generates a secure random value
      - key: APP_TIMEZONE
        value: Africa/Lubumbashi
      - key: PYTHONUNBUFFERED
        value: "1"
    
    # Build configuration
    buildCommand: ""  # Docker handles this
    
    # Start command (overrides Dockerfile CMD)
    startCommand: "gunicorn --bind 0.0.0.0:$PORT --workers 2 --timeout 120 run:app"