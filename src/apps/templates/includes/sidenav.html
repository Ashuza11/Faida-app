<nav class="sidenav navbar navbar-vertical fixed-left navbar-expand-xs navbar-light bg-white" id="sidenav-main">
  <div class="scrollbar-inner">
    <!-- Brand -->
    <div class="sidenav-header align-items-center">
      {% if current_user.is_platform_admin %}
        <a class="navbar-brand" href="/admin/dashboard">
          <img src="/static/assets/img/brand/faida-logo.png" class="navbar-brand-img" alt="Faida Logo." style="max-height: 2.6rem;">
        </a>
      {% else %}
        <a class="navbar-brand" href="/">
          <img src="/static/assets/img/brand/faida-logo.png" class="navbar-brand-img" alt="Faida Logo." style="max-height: 2.6rem;">
        </a>
      {% endif %}
    </div>
    <div class="navbar-inner">
      <!-- Collapse -->
      <div class="collapse navbar-collapse" id="sidenav-collapse-main">
        <!-- Nav items -->
        <ul class="navbar-nav">
          <!-- ========================================== -->
          <!-- PLATFORM ADMIN ONLY SECTION -->
          <!-- ========================================== -->
          {% if current_user.is_platform_admin %}
          
          <!-- Admin Dashboard -->
          <li class="nav-item">
            <a class="nav-link {% if segment == 'admin' and sub_segment == 'dashboard' %}active{% endif %}" href="{{ url_for('admin_bp.dashboard') }}">
              <i class="fas fa-tachometer-alt text-danger"></i>
              <span class="nav-link-text">Dashboard Admin</span>
            </a>
          </li>

          <!-- Administration Menu -->
          <li class="nav-item">
            <a class="nav-link {% if segment == 'admin' and sub_segment != 'dashboard' %}active{% endif %}" href="#navbar-admin" data-toggle="collapse" role="button" aria-expanded="{% if segment == 'admin' and sub_segment != 'dashboard' %}true{% else %}false{% endif %}">
              <i class="fas fa-cogs text-danger"></i>
              <span class="nav-link-text">Administration</span>
            </a>
            <div class="collapse {% if segment == 'admin' and sub_segment != 'dashboard' %}show{% endif %}" id="navbar-admin">
              <ul class="nav nav-sm flex-column">
                <li class="nav-item">
                  <a class="nav-link {% if sub_segment == 'vendeurs' %}active{% endif %}" href="{{ url_for('admin_bp.vendeurs_list') }}">
                    <i class="fas fa-store"></i>
                    <span class="nav-link-text">Vendeurs</span>
                  </a>
                </li>
                <li class="nav-item">
                  <a class="nav-link {% if sub_segment == 'invite_codes' %}active{% endif %}" href="{{ url_for('admin_bp.invite_codes_list') }}">
                    <i class="fas fa-key"></i>
                    <span class="nav-link-text">Codes d'invitation</span>
                  </a>
                </li>
              </ul>
            </div>
          </li>

          {% endif %}
          <!-- END PLATFORM ADMIN ONLY -->


          <!-- ========================================== -->
          <!-- BUSINESS USERS ONLY (Vendeur & Stockeur) -->
          <!-- ========================================== -->
          {% if current_user.is_vendeur or current_user.is_stockeur %}

          <li class="nav-item">
            <a class="nav-link {% if 'index' in segment %} active {% endif %} btn-loader" href="/index">
              <i class="fas fa-home text-primary"></i>
              <span class="nav-link-text">Accueil</span>
            </a>
          </li>

          <!-- STOCK -->
          <li class="nav-item">
            <a class="nav-link {% if segment == 'stock' %}active{% endif %} btn-loader" href="#navbar-stock" data-toggle="collapse" role="button" aria-expanded="{% if segment == 'stock' %}true{% else %}false{% endif %}" data-target="#navbar-stock">
              <i class="fas fa-boxes text-primary"></i>
              <span class="nav-link-text">Stock</span>
            </a>
            <div class="collapse {% if segment == 'stock' %}show{% endif %}" id="navbar-stock">
              <ul class="nav nav-sm flex-column">
                
                <!-- Achat Stock - VENDEUR only (not stockeurs) -->
                {% if current_user.is_vendeur %}
                <li class="nav-item">
                  <a class="nav-link {% if sub_segment == 'achat_stock' %}active{% endif %} btn-loader" href="{{ url_for('main_bp.achat_stock') }}">
                    <i class="fas fa-cart-plus"></i>
                    <span class="nav-link-text">Achat stock</span>
                  </a>
                </li>
                {% endif %}

                <!-- Vente Stock - Vendeur & Stockeur -->
                <li class="nav-item">
                  <a class="nav-link {% if sub_segment == 'vente_stock' %}active{% endif %} btn-loader" href="{{ url_for('main_bp.vente_stock') }}">
                    <i class="fas fa-shopping-cart"></i>
                    <span class="nav-link-text">Vente stock</span>
                  </a>
                </li>

                <!-- Cash - Vendeur & Stockeur -->
                <li class="nav-item">
                  <a class="nav-link {% if sub_segment == 'Sorties_Cash' %}active{% endif %} btn-loader" href="{{ url_for('main_bp.sorties_cash') }}">
                    <i class="fas fa-money-bill-wave-alt"></i>
                    <span class="nav-link-text">Cash</span>
                  </a>
                </li>

              </ul>
            </div>
          </li>

          <!-- CARTE SIM - Future feature -->
          <li class="nav-item">
            <a class="nav-link {% if 'Carte_SIM' in segment %} active {% endif %} btn-loader" href="#">
              <i class="fas fa-sim-card text-primary"></i>
              <span class="nav-link-text">Carte SIM</span>
            </a>
          </li>

          <!-- TERRAIN (Map) - Vendeur & Stockeur -->
          <li class="nav-item">
            <a class="nav-link {% if 'client_map' in segment %}active{% endif %} btn-loader" href="{{ url_for('main_bp.client_map') }}">
              <i class="ni ni-map-big text-primary"></i>
              <span class="nav-link-text">Terrain</span>
            </a>
          </li>

          <!-- RAPPORTS - VENDEUR only -->
          {% if current_user.is_vendeur %}
          <li class="nav-item">
            <a class="nav-link {% if segment == 'rapports' %} active {% endif %} btn-loader" href="{{ url_for('main_bp.rapports') }}">
              <i class="ni ni-chart-bar-32 text-primary"></i>
              <span class="nav-link-text">Rapports</span>
            </a>
          </li>
          {% endif %}

          <!-- GESTION Section - Vendeur & Stockeur (different items) -->
          <li class="nav-item">
            <a class="nav-link {% if segment == 'gestion' %}active{% endif %}" href="#navbar-gestion" data-toggle="collapse" role="button" aria-expanded="{% if segment == 'gestion' %}true{% else %}false{% endif %}">
              <i class="fas fa-users text-primary"></i>
              <span class="nav-link-text">Gestion</span>
            </a>
            <div class="collapse {% if segment == 'gestion' %}show{% endif %}" id="navbar-gestion">
              <ul class="nav nav-sm flex-column">
                
                <!-- Stockeurs - VENDEUR only -->
                {% if current_user.is_vendeur %}
                <li class="nav-item">
                  <a class="nav-link {% if sub_segment == 'stocker' %}active{% endif %} btn-loader" href="{{ url_for('main_bp.stocker_management') }}">
                    <i class="fas fa-user-tie"></i>
                    <span class="nav-link-text">Stockeurs</span>
                  </a>
                </li>
                {% endif %}

                <!-- Clients - Vendeur & Stockeur -->
                <li class="nav-item">
                  <a class="nav-link {% if sub_segment == 'clients' %}active{% endif %} btn-loader" href="{{ url_for('main_bp.client_management') }}">
                    <i class="fas fa-user"></i>
                    <span class="nav-link-text">Clients</span>
                  </a>
                </li>

              </ul>
            </div>
          </li>

          {% endif %}
          <!-- END BUSINESS USERS ONLY -->

        </ul>

        <!-- Divider -->
        <hr class="my-3">

        <!-- Bottom Section -->
        <ul class="navbar-nav mb-md-3">
        
          <!-- Logout -->
          <li class="nav-item">
            <a class="nav-link btn-loader" href="{{ url_for('auth_bp.logout') }}">
              <i class="fas fa-sign-out-alt text-primary"></i>
              <span class="nav-link-text">DÃ©connexion</span>
            </a>
          </li>

        </ul>

      </div>
    </div>
  </div>
</nav>